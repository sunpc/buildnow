webpackJsonp([1],{"9bBU":function(e,t,a){a("mClu");var s=a("FeBl").Object;e.exports=function(e,t,a){return s.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var s,r=a("C4MV"),o=(s=r)&&s.__esModule?s:{default:s};t.default=function(e,t,a){return t in e?(0,o.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},mClu:function(e,t,a){var s=a("kM2E");s(s.S+s.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},niH5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("bOdI"),r=a.n(s)()({data:function(){return{env:{envCode:sessionStorage.getItem("workspace"),envDesc:""},findMember:"",foundMembers:[],findFeature:"",foundFeatures:[],allMembers:[],allFeatures:[],defaults:{user:"",jclLib:"",db2Schema:""},addMemberDialogVisible:!1,addFeatureDialogVisible:!1,addMemberForm:{email:"",role:"Developer"},addFeatureForm:{featureName:"F",featureDesc:""},buttonLoading:!1}},methods:{handleTabClick:function(e,t){switch(e.index){case"1":this.getMembers();break;case"2":this.getDefaults();break;case"3":this.getFeatures()}},getEnv:function(){var e=this;this.$axios({url:"/api/rest/getEnv",method:"post",data:{envCode:sessionStorage.getItem("workspace")}}).then(function(t){e.env.envDesc=t.data.result.ENV_DESP.trim()})},saveEnv:function(){var e=this;this.buttonLoading=!0;this.$axios({url:"/api/rest/saveEnv",method:"post",data:{envCode:sessionStorage.getItem("workspace"),envDesc:this.env.envDesc,lastActUserId:parseInt(sessionStorage.getItem("userid"))}}).then(function(t){e.buttonLoading=!1,e.$message({type:"success",message:"Saved!"})},function(t){e.buttonLoading=!1,e.$message({type:"error",message:"Save failed. Please contact administrator."})})},getMembers:function(){var e=this;this.$axios({url:"/api/rest/getMembers",method:"post",data:{envCode:sessionStorage.getItem("workspace")}}).then(function(t){e.allMembers.splice(0,e.allMembers.length),e.foundMembers.splice(0,e.foundMembers.length),t.data.result.forEach(function(t){var a={name:t.USER_NAME.trim(),email:t.USER_EMAIL.trim(),role:t.USER_ROLE.trim(),status:t.APPR_STATUS.trim(),img:"https://w3-services1.w3-969.ibm.com/myw3/unified-profile-photo/v1/image/"+t.USER_EMAIL.trim()};e.allMembers.push(a),e.foundMembers.push(a)})})},getFeatures:function(){var e=this;this.$axios({url:"/api/git/getFeatures",method:"post",data:{envCode:sessionStorage.getItem("workspace")}}).then(function(t){e.allFeatures.splice(0,e.allFeatures.length),e.foundFeatures.splice(0,e.foundFeatures.length),t.data.result.forEach(function(t){var a={featureName:t.FEATURE_NAME.trim(),featureDesc:t.FEATURE_DESC.trim(),status:t.APPR_STATUS.trim()};e.allFeatures.push(a),e.foundFeatures.push(a)})})},showAddMemberDialog:function(){this.addMemberDialogVisible=!0},showAddFeatureDialog:function(){this.addFeatureDialogVisible=!0},addMember:function(){var e=this;this.buttonLoading=!0,this.addMemberForm.email=this.addMemberForm.email.trim();this.$axios({url:"/api/rest/searchBluePages",method:"post",data:{email:this.addMemberForm.email}}).then(function(t){if("success"==t.data.result){var a=t.data.name;e.$axios({url:"/api/rest/addMember",method:"post",data:{envCode:sessionStorage.getItem("workspace"),userName:a,userEmail:e.addMemberForm.email,userRole:e.addMemberForm.role,lastActUserId:parseInt(sessionStorage.getItem("userid"))}}).then(function(t){if("success"==t.data.result){var s={name:a,email:e.addMemberForm.email,role:e.addMemberForm.role,status:"Approved",img:"https://w3-services1.w3-969.ibm.com/myw3/unified-profile-photo/v1/image/"+e.addMemberForm.email};e.allMembers.push(s),(s.name.toUpperCase().indexOf(e.findMember.toUpperCase())>=0||s.email.toUpperCase().indexOf(e.findMember.toUpperCase())>=0)&&e.foundMembers.push(s),e.addMemberForm.email="",e.buttonLoading=!1,e.$message({type:"success",message:"Member Added."})}},function(t){e.buttonLoading=!1,e.$message({type:"error",message:"Add failed. Please contact administrator."})})}else e.buttonLoading=!1,e.$message({type:"error",message:"Email address not found in BluePages."})},function(t){e.buttonLoading=!1,e.$message({type:"error",message:"BluePages unavailable. Please contact administrator."})})},addFeature:function(){var e=this;this.buttonLoading=!0,this.addFeatureForm.email=this.addFeatureForm.featureName.trim();this.$axios({url:"/api/git/addFeature",method:"post",data:{envCode:sessionStorage.getItem("workspace"),featureName:this.addFeatureForm.featureName,featureDesc:this.addFeatureForm.featureDesc,lastActUserId:parseInt(sessionStorage.getItem("userid"))}}).then(function(t){if("success"==t.data.result){var a={featureName:e.addFeatureForm.featureName,featureDesc:e.addFeatureForm.featureDesc,status:"Approved"};e.allFeatures.push(a),(a.featureName.toUpperCase().indexOf(e.findFeature.toUpperCase())>=0||a.featureDesc.toUpperCase().indexOf(e.findFeature.toUpperCase())>=0)&&e.foundFeatures.push(a),e.addFeatureForm.featureName="",e.buttonLoading=!1,e.$message({type:"success",message:"Feature Added."}),e.addFeatureDialogVisible=!1}},function(t){e.buttonLoading=!1,e.$message({type:"error",message:"Add failed. Please contact administrator."})})},handleChangeRole:function(e){var t=this;this.$axios({url:"/api/rest/updateMemberRole",method:"post",data:{envCode:sessionStorage.getItem("workspace"),userEmail:e.email,userRole:e.role,lastActUserId:parseInt(sessionStorage.getItem("userid"))}}).then(function(a){"success"==a.data.result&&t.allMembers.forEach(function(t){t.email==e.email&&(t.role=e.role)})})},handleChangeStatus:function(e){var t=this;this.$axios({url:"/api/rest/updateMemberStatus",method:"post",data:{envCode:sessionStorage.getItem("workspace"),userEmail:e.email,apprStatus:e.status,lastActUserId:parseInt(sessionStorage.getItem("userid"))}}).then(function(a){"success"==a.data.result&&t.allMembers.forEach(function(t){t.email==e.email&&(t.status=e.status)})})},handleChangeFeatureStatus:function(e){var t=this;this.$axios({url:"/api/git/updateFeatureStatus",method:"post",data:{envCode:sessionStorage.getItem("workspace"),featureName:e.featureName,apprStatus:e.status,lastActUserId:parseInt(sessionStorage.getItem("userid"))}}).then(function(a){"success"==a.data.result&&t.allFeatures.forEach(function(t){t.featureName==e.featureName&&(t.status=e.status)})})},getDefaults:function(){var e=this;this.$axios({url:"/api/rest/getDefaults",method:"post",data:{envCode:sessionStorage.getItem("workspace")}}).then(function(t){e.defaults.user=t.data.result.USER.trim(),e.defaults.jclLib=t.data.result["JCLLIB ORDER"].trim(),e.defaults.db2Schema=t.data.result["DB2 Schema"].trim()})},saveDefaults:function(){var e=this;this.buttonLoading=!0;var t=[];t.push({name:"USER",value:this.defaults.user}),t.push({name:"JCLLIB ORDER",value:this.defaults.jclLib}),t.push({name:"DB2 Schema",value:this.defaults.db2Schema});this.$axios({url:"/api/rest/saveEnvDefaults",method:"post",data:{envCode:sessionStorage.getItem("workspace"),defaults:t,lastActUserId:parseInt(sessionStorage.getItem("userid"))}}).then(function(t){e.buttonLoading=!1,e.$message({type:"success",message:"Saved!"})},function(t){e.buttonLoading=!1,e.$message({type:"error",message:"Save failed. Please contact administrator."})})}},mounted:function(){"Admin"!=sessionStorage.getItem("userrole")&&this.$router.push("/"),this.getEnv()},watch:{findMember:function(e){var t=this;this.foundMembers.splice(0,this.foundMembers.length),this.allMembers.forEach(function(a){(a.name.toUpperCase().indexOf(e.toUpperCase())>=0||a.email.toUpperCase().indexOf(e.toUpperCase())>=0)&&t.foundMembers.push(a)})}}},"watch",{findFeature:function(e){var t=this;this.foundFeatures.splice(0,this.foundFeatures.length),this.allFeatures.forEach(function(a){a.featureName.toUpperCase().indexOf(e.toUpperCase())>=0&&t.foundFeatures.push(a)})}}),o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"settings-container"},[e._m(0),e._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleTabClick}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont icon-general"}),e._v(" General")]),e._v(" "),a("el-form",{ref:"envForm",attrs:{model:e.env,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Workspace"}},[a("el-input",{attrs:{disabled:""},model:{value:e.env.envCode,callback:function(t){e.$set(e.env,"envCode",t)},expression:"env.envCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Description"}},[a("el-input",{model:{value:e.env.envDesc,callback:function(t){e.$set(e.env,"envDesc",t)},expression:"env.envDesc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",loading:e.buttonLoading},on:{click:e.saveEnv}},[e._v("Save")])],1)],1)],1),e._v(" "),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont icon-people"}),e._v(" People")]),e._v(" "),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"Find a member...",clearable:""},model:{value:e.findMember,callback:function(t){e.findMember=t},expression:"findMember"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showAddMemberDialog}},[e._v("Add member")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.foundMembers,"max-height":"450"}},[a("el-table-column",{attrs:{label:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"user-avator"},[a("img",{attrs:{src:t.row.img}}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Email",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.email)+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Role",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleChangeRole}},[a("span",{staticClass:"el-dropdown-link"},[e._v("                      \n                    "+e._s(t.row.role)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{email:t.row.email,role:"Admin"}}},[e._v("Admin")]),e._v(" "),a("el-dropdown-item",{attrs:{command:{email:t.row.email,role:"Developer"}}},[e._v("Developer")]),e._v(" "),a("el-dropdown-item",{attrs:{command:{email:t.row.email,role:"Viewer"}}},[e._v("Viewer")])],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Status",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleChangeStatus}},[a("span",{staticClass:"el-dropdown-link"},[e._v("                      \n                    "+e._s(t.row.status)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{email:t.row.email,status:"Approved"}}},[e._v("Approved")]),e._v(" "),a("el-dropdown-item",{attrs:{command:{email:t.row.email,status:"Canceled"}}},[e._v("Canceled")])],1)],1)]}}])})],1)],1),e._v(" "),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont icon-default"}),e._v(" Defaults")]),e._v(" "),a("el-form",{ref:"defaultsForm",attrs:{model:e.defaults,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Batch User"}},[a("el-input",{model:{value:e.defaults.user,callback:function(t){e.$set(e.defaults,"user",t)},expression:"defaults.user"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"JCL Lib"}},[a("el-input",{model:{value:e.defaults.jclLib,callback:function(t){e.$set(e.defaults,"jclLib",t)},expression:"defaults.jclLib"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"DB2 Schema"}},[a("el-input",{model:{value:e.defaults.db2Schema,callback:function(t){e.$set(e.defaults,"db2Schema",t)},expression:"defaults.db2Schema"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",loading:e.buttonLoading},on:{click:e.saveDefaults}},[e._v("Save")])],1)],1)],1),e._v(" "),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont icon-default"}),e._v(" Feature")]),e._v(" "),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"Find a feature...",clearable:""},model:{value:e.findFeature,callback:function(t){e.findFeature=t},expression:"findFeature"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showAddFeatureDialog}},[e._v("Add Feature")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.foundFeatures,"max-height":"300"}},[a("el-table-column",{attrs:{label:"Feature"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.featureName)+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Description",width:"450"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.featureDesc)+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Status",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleChangeFeatureStatus}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n                    "+e._s(t.row.status)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{featureName:t.row.featureName,status:"Approved"}}},[e._v("Approved\n                    ")]),e._v(" "),a("el-dropdown-item",{attrs:{command:{featureName:t.row.featureName,status:"Canceled"}}},[e._v("Canceled\n                    ")])],1)],1)]}}])})],1)],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Add member",visible:e.addMemberDialogVisible,"close-on-click-modal":!1,"show-close":!0},on:{"update:visible":function(t){e.addMemberDialogVisible=t}}},[a("el-form",{attrs:{model:e.addMemberForm}},[a("el-form-item",{attrs:{label:"Email","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addMemberForm.email,callback:function(t){e.$set(e.addMemberForm,"email",t)},expression:"addMemberForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Role","label-width":"120px"}},[a("el-select",{model:{value:e.addMemberForm.role,callback:function(t){e.$set(e.addMemberForm,"role",t)},expression:"addMemberForm.role"}},[a("el-option",{attrs:{label:"Admin",value:"Admin"}}),e._v(" "),a("el-option",{attrs:{label:"Developer",value:"Developer"}}),e._v(" "),a("el-option",{attrs:{label:"Viewer",value:"Viewer"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:e.addMember}},[e._v("Add")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Add member",visible:e.addFeatureDialogVisible,"close-on-click-modal":!1,"show-close":!0},on:{"update:visible":function(t){e.addFeatureDialogVisible=t}}},[a("el-form",{attrs:{model:e.addFeatureForm}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"Feature:","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addFeatureForm.featureName,callback:function(t){e.$set(e.addFeatureForm,"featureName",t)},expression:"addFeatureForm.featureName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"Description:","label-width":"120px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addFeatureForm.featureDesc,callback:function(t){e.$set(e.addFeatureForm,"featureDesc",t)},expression:"addFeatureForm.featureDesc"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:e.addFeature}},[e._v("Add")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[t("i",{staticClass:"el-icon-setting"}),this._v(" Settings")])}]};var l=a("VU/8")(r,o,!1,function(e){a("qama")},"data-v-4d69efb2",null);t.default=l.exports},qama:function(e,t){}});
//# sourceMappingURL=1.5de5acf92de47226c0a6.js.map