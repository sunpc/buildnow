webpackJsonp([2],{mvHQ:function(e,t,s){e.exports={default:s("qkKv"),__esModule:!0}},oOSm:function(e,t){},qkKv:function(e,t,s){var r=s("FeBl"),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},xJsL:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("mvHQ"),o=s.n(r),a={data:function(){return{loginForm:{workspace:"",username:"",password:""},rules:{username:[{required:!0,message:"",trigger:"blur"}],password:[{required:!0,message:"",trigger:"blur"}]},workspaces:[]}},methods:{getDefaultWorkspace:function(){var e=this;this.$axios({url:"/api/rest/getDefaultEnv",method:"post",data:{userEmail:this.loginForm.username}}).then(function(t){t.data.envCode&&""!=t.data.envCode&&(e.loginForm.workspace=t.data.envCode)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("Invalid input. Please retry."),!1;var s=t.$loading({lock:!0,text:"w3ID authenticating...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});t.$axios({url:"/api/rest/auth",method:"post",data:{username:t.loginForm.username,password:t.loginForm.password,envcode:t.loginForm.workspace}}).then(function(e){e.data.authenticated?(sessionStorage.setItem("workspace",t.loginForm.workspace),sessionStorage.setItem("username",t.loginForm.username),sessionStorage.setItem("userid",e.data.userId),sessionStorage.setItem("w3name",e.data.userName),sessionStorage.setItem("userrole",e.data.userRole),sessionStorage.setItem("jobproperties",o()(e.data.defaults.result)),s.close(),t.$router.push("/")):(t.$message.error(e.data.message),s.close())},function(e){t.$message.error("System error. Please retry."),s.close()})})}},mounted:function(){var e=this;this.$axios({url:"/api/rest/getEnvs",method:"post",data:{}}).then(function(t){t.data.result.forEach(function(t){e.workspaces.push({value:t.ENV_CODE.trim(),label:t.ENV_CODE.trim()+" - "+t.ENV_DESP.trim()}),1==t.DEFAULT_INDC&&(e.loginForm.workspace=t.ENV_CODE.trim())})})}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-wrap"},[s("div",{staticClass:"ms-title"},[e._v("zBuild")]),e._v(" "),s("div",{staticClass:"ms-login"},[s("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"status-icon":"","show-message":!1,rules:e.rules,"label-width":"0px"}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"Your IBM email address (e.g.jdoe@us.ibm.com)"},on:{blur:e.getDefaultWorkspace},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"Password"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm("loginForm")}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"workspace"}},[s("el-select",{attrs:{placeholder:"Your development workspace"},model:{value:e.loginForm.workspace,callback:function(t){e.$set(e.loginForm,"workspace",t)},expression:"loginForm.workspace"}},e._l(e.workspaces,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),s("div",{staticClass:"login-btn"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("loginForm")}}},[e._v("Sign In")])],1),e._v(" "),s("p",{staticStyle:{"font-size":"12px","line-height":"30px"}},[s("a",{attrs:{target:"_blank",href:"https://w3idprofile.sso.ibm.com/password/createpwd_lookup_otp.wss"}},[e._v("Forget password?")])])],1)],1)])},staticRenderFns:[]};var i=s("VU/8")(a,n,!1,function(e){s("oOSm")},"data-v-1a13454b",null);t.default=i.exports}});
//# sourceMappingURL=2.c818e590e7149c91ad37.js.map